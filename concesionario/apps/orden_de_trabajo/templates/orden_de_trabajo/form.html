{% extends "base.html" %}
{% load staticfiles %}

{# Load the tag library #}
{% load bootstrap3 %}

{# Load CSS and JavaScript #}
{% bootstrap_javascript %}

{# Display django.contrib.messages as Bootstrap alerts #}
{% bootstrap_messages %}

{% block css %}
{{ block.super }}
    <link href="{% static 'color_admin/assets/plugins/bootstrap-wizard/css/bwizard.min.css' %}" rel="stylesheet" />
    <link href="{% static 'color_admin/assets/plugins/DataTables-1.9.4/css/data-table.css' %}" rel="stylesheet" />
{% endblock %}

{% block breadcrumb %}
Gestión Ordenes de Trabajo
{% endblock %}
{% block section_title %}{{ section_title }}{% endblock %}
{% block section_subtitle %}Diligencie el siguiente formulario{% endblock %}
{% block content %}
    <!-- begin row -->
            <div class="row">
                <!-- begin col-12 -->
                <div class="col-md-12">
                    <ul class="nav nav-tabs">
                        <li class="active"><a id="tab-1" href="#default-tab-1" data-toggle="tab">Orden de Trabajo</a></li>
                        <li class=""><a id="tab-2" href="#default-tab-2" data-toggle="tab"> Seleccionar Cliente</a></li>
                        <li class=""><a id="tab-3" href="#default-tab-3" data-toggle="tab"> Seleccionar Vehículo</a></li>
                    </ul>
                    <div class="tab-content">
                        <div class="tab-pane fade active in" id="default-tab-1">
                            <form method="post" data-parsley-validate="true" name="form-wizard" enctype="multipart/form-data"> {% csrf_token %}
                                <blockquote>
                                <h3 class="m-t-10"><i class="fa fa-cog"></i> Información Orden de Trabajo</h3>
                                </blockquote>
                                <p>
                                    <!-- begin panel -->
                                    <div class="panel panel-inverse">
                                        <div class="panel-heading">
                                            <div class="panel-heading-btn">
                                                <a href="javascript:;" class="btn btn-xs btn-icon btn-circle btn-default" data-click="panel-expand"><i class="fa fa-expand"></i></a>
                                                <a href="javascript:;" class="btn btn-xs btn-icon btn-circle btn-warning" data-click="panel-collapse"><i class="fa fa-minus"></i></a>
                                            </div>Orden de Trabajo</h4>
                                        </div>
                                        <div class="panel-body">
                                            <div id="wizard">
                                                <ol>
                                                    <li>
                                                        Informacion General
                                                        <small></small>
                                                    </li>
                                                </ol>
                                                <!-- begin wizard step-1 -->
                                                <div class="wizard-step-1">
                                                    <fieldset>
                                                        <!-- begin row -->
                                                        <div class="row">
                                                            {% bootstrap_form form %}
                                                        </div>
                                                        <!-- end row -->
                                                    </fieldset>
                                                </div>
                                                <!-- end wizard step-1 -->
                                            </div>
                                        </div>
                                    </div>
                                    <!-- end panel -->
                                </p>
                                <p class="text-right m-b-0">
                                    <button type="submit" class="btn btn-primary"><i class="fa fa-cog"></i> Guardar</button>
                                </p>
                            </form>
                        </div>
                        <div class="tab-pane fade" id="default-tab-2">
                            <blockquote>
                                <h3 class="m-t-10"><i class="fa fa-male"></i>  Seleccione el Cliente</h3>
                            </blockquote>
                            <p>
                                <!-- begin panel -->
                                <div class="panel panel-inverse">
                                    <div class="panel-heading">
                                        <div class="panel-heading-btn">
                                            <a href="javascript:;" class="btn btn-xs btn-icon btn-circle btn-default" data-click="panel-expand"><i class="fa fa-expand"></i></a>
                                            <a href="javascript:;" class="btn btn-xs btn-icon btn-circle btn-success" data-click="panel-reload"><i class="fa fa-repeat"></i></a>
                                            <a href="javascript:;" class="btn btn-xs btn-icon btn-circle btn-warning" data-click="panel-collapse"><i class="fa fa-minus"></i></a>
                                            <a href="javascript:;" class="btn btn-xs btn-icon btn-circle btn-danger" data-click="panel-remove"><i class="fa fa-times"></i></a>
                                        </div>
                                    <h4 class="panel-title">Clientes</h4>
                                    </div>
                                    <div class="panel-body">
                                        <div class="table-responsive">
                                            <table class="table table-striped table-bordered">
                                                <thead>
                                                    <tr>
                                                       
                                                    <th>Identificación</th>
                                                    <th>Nombre</th>
                                                    <th>Apellido</th>
                                                    <th>Ciudad</th>
                                                    <th>Departamento</th>
                                                    <th>Teléfono</th>
                                                    <th>Celular</th>
                                                    <th>Email</th>
                                                    <th>Habilitado</th>
                                                    </tr>
                                                </thead>
                                                 <tbody>
                                                    {% for cliente  in clientes %}
                                                        <tr>
                                                            <td><a class="cliente" href="{% url 'cliente:actualizar' cliente.pk %}"> {{ cliente.identificacion }}</a></td>
                                                            <td>{{ cliente.nombre }}</td>
                                                            <td>{{ cliente.apellido }}</td>
                                                            <td>{{ cliente.ciudad }}</td>
                                                            <td>{{ cliente.departamento }}</td>
                                                            <td>{{ cliente.telefono }}</td>
                                                            <td>{{ cliente.celular }}</td>
                                                            <td>{{ cliente.email }}</td>
                                                            <td>
                                                                {% if cliente.habilitado %}
                                                                <ul class="fa-ul">
                                                                    <li><i class="fa-li fa fa-check-square text-success"></i></li>
                                                                </ul>
                                                                {% else %}
                                                                <ul class="fa-ul">
                                                                    <li><i class="fa-li fa fa-square"></i></li>
                                                                </ul>
                                                                {% endif %}
                                                            </td>
                                                        </tr>
                                                    {% endfor %} 
                                                </tbody>
                                            </table>
                                        </div>
                                    </div>
                                </div>
                                <!-- end panel -->
                            </p>
                        </div>
                        <div class="tab-pane fade" id="default-tab-3">
                            <blockquote>
                                <h3 class="m-t-10"><i class="fa fa-car"></i>  Seleccione el Vehiculo</h3>
                            </blockquote>
                            <p>
                                <div class="panel panel-inverse">
                                    <div class="panel-heading">
                                        <div class="panel-heading-btn">
                                            <a href="javascript:;" class="btn btn-xs btn-icon btn-circle btn-default" data-click="panel-expand"><i class="fa fa-expand"></i></a>
                                            <a href="javascript:;" class="btn btn-xs btn-icon btn-circle btn-success" data-click="panel-reload"><i class="fa fa-repeat"></i></a>
                                            <a href="javascript:;" class="btn btn-xs btn-icon btn-circle btn-warning" data-click="panel-collapse"><i class="fa fa-minus"></i></a>
                                            <a href="javascript:;" class="btn btn-xs btn-icon btn-circle btn-danger" data-click="panel-remove"><i class="fa fa-times"></i></a>
                                        </div>
                                        <h4 class="panel-title">Vehiculos</h4>
                                    </div>
                                    <div class="panel-body">
                                        <div class="table-responsive">
                                            <table class="table table-striped table-bordered">
                                                <thead>
                                                    <tr>
                                                        <th>Nº de serie</th>
                                                        <th>Marca</th>
                                                        <th>Modelo</th>
                                                        <th>Motor</th>
                                                        <th>Potencia</th>
                                                        <th>Tipo</th>
                                                        <th>Capacidad</th>
                                                        <th>Características</th>
                                                        <th>Precio</th>
                                                        <th>Imagen</th>
                                                    </tr>
                                                </thead>
                                                <tbody>
                                                {% for vehiculo  in vehiculos %}
                                                    <tr>
                                                        <td><a class="vehiculo" href="{% url 'vehiculo:actualizar' vehiculo.pk %}"> {{ vehiculo.numero_serie }}</a></td>
                                                        <td>{{ vehiculo.marca }}</td>
                                                        <td>{{ vehiculo.modelo }}</td>
                                                        <td>{{ vehiculo.motor }}</td>
                                                        <td>{{ vehiculo.potencia }}</td>
                                                        <td>{{ vehiculo.tipo }}</td>
                                                        <td>{{ vehiculo.capacidad }}</td>
                                                        <td>{{ vehiculo.caracteristicas }}</td>
                                                        <td>{{ vehiculo.precio }}</td>
                                                        <td>{% if  vehiculo.imagen %}
                                                                <img src={{ vehiculo.imagen.url }} width=50 height=50 class="media-object rounded-corner"/> 
                                                            {% else %}
                                                                <img src="{{ MEDIA_URL }}imagenes/vehiculos/imagen_no_disponible.jpg" width=50 height=50 class="media-object rounded-corner" />
                                                            {% endif %} </td>
                                                    </tr >
                                                {% endfor %} 
                                                </tbody>
                                            </table>
                                        </div>
                                    </div>
                                </div> 
                            </p>
                        </div>
                    </div>
                </div>
                <!-- end col-12 -->
            </div>
{% endblock %}

{% block javascript %}
{{ block.super }}
<script src="{% static 'color_admin/assets/plugins/parsley/dist/parsley.js' %}"></script>
<script src="{% static 'color_admin/assets/plugins/bootstrap-wizard/js/bwizard.js' %}"></script>
<script src="{% static 'color_admin/assets/js/form-wizards-validation.demo.min.js' %}"></script>
<script src="{% static 'color_admin/assets/js/apps.min.js' %}"></script>
<script src="{% static 'color_admin/assets/plugins/DataTables-1.9.4/js/jquery.dataTables.js' %}"></script>
<script src="{% static 'color_admin/assets/plugins/DataTables-1.9.4/js/data-table.js' %}"></script>
<script>
    $(document).ready(function() {
        App.init();
        FormWizardValidation.init();
        $('.table').DataTable();
    });
</script>
<script type="text/javascript">
    $( ".vehiculo" ).click(function(event){
        event.preventDefault();
        var clickedVehicleId = $(this).attr('href').split("/")[2];
        $( "#id_vehiculo" ).val(clickedVehicleId);
        $( "#tab-1" ).tab('show');
    });
    $( ".cliente" ).click(function(event){
        event.preventDefault();
        var clickedVehicleId = $(this).attr('href').split("/")[2];
        $( "#id_cliente" ).val(clickedVehicleId);
        $( "#tab-1" ).tab('show');
    });   
</script>
{% endblock %}